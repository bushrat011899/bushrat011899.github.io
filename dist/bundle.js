(()=>{"use strict";var e,t,a,n={},r={};function s(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,s),a.exports}s.m=n,e=[],s.O=(t,a,n,r)=>{if(!a){var i=1/0;for(d=0;d<e.length;d++){for(var[a,n,r]=e[d],o=!0,l=0;l<a.length;l++)(!1&r||i>=r)&&Object.keys(s.O).every((e=>s.O[e](a[l])))?a.splice(l--,1):(o=!1,r<i&&(i=r));if(o){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[a,n,r]},s.F={},s.E=e=>{Object.keys(s.F).map((t=>{s.F[t](e)}))},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.f={},s.e=e=>Promise.all(Object.keys(s.f).reduce(((t,a)=>(s.f[a](e,t),t)),[])),s.u=e=>e+".bundle.js",s.miniCssF=e=>{},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="bushrat-site:",s.l=(e,n,r,i)=>{if(t[e])t[e].push(n);else{var o,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==a+r){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,s.nc&&o.setAttribute("nonce",s.nc),o.setAttribute("data-webpack",a+r),o.src=e),t[e]=[n];var m=(a,n)=>{o.onerror=o.onload=null,clearTimeout(h);var r=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(n))),a)return a(n)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),l&&document.head.appendChild(o)}},s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;s.g.importScripts&&(e=s.g.location+"");var t=s.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&!e;)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=e})(),(()=>{var e={179:0};s.f.j=(t,a)=>{var n=s.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var r=new Promise(((a,r)=>n=e[t]=[a,r]));a.push(n[2]=r);var i=s.p+s.u(t),o=new Error;s.l(i,(a=>{if(s.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,n[1](o)}}),"chunk-"+t,t)}},s.F.j=t=>{if(!s.o(e,t)||void 0===e[t]){e[t]=null;var a=document.createElement("link");s.nc&&a.setAttribute("nonce",s.nc),a.rel="prefetch",a.as="script",a.href=s.p+s.u(t),document.head.appendChild(a)}},s.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[i,o,l]=a,c=0;if(i.some((t=>0!==e[t]))){for(n in o)s.o(o,n)&&(s.m[n]=o[n]);if(l)var d=l(s)}for(t&&t(a);c<i.length;c++)r=i[c],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},a=self.webpackChunkbushrat_site=self.webpackChunkbushrat_site||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),s.O(0,[179],(()=>{s.E(148),s.E(282)}),5);var i={};class o{[Symbol.asyncIterator](){return this}#e=!1;#t=null;#a=null;#n;#r;#s(){this.#t=new Promise((e=>{this.#n=e}))}#i(){this.#a=new Promise((e=>{this.#r=e}))}constructor(e){this.#s(),this.#i(),e.onsuccess=async e=>{const t=e.target.result;if(!await this.#t||!t)return this.#r({done:!0,value:void 0});this.#s();const a=t.value;this.#r({done:!1,value:a}),t.continue()}}async next(){if(this.#e)return{done:!0,value:void 0};this.#n(!0);const e=await this.#a;return e.done&&(this.#e=!0),this.#i(),e}async return(){return this.#n(!1),await this.#a}async all(){const e=[];for await(const t of this)e.push(t);return e}}function l(e){return new Promise(((t,a)=>{e.onsuccess=e=>{const a=e.target.result;t(a)},e.onerror=e=>{console.error("DB Request Failed",e),a(e)}}))}class c{#o;constructor(e,t){this.#o=t??{},this.#l=e}#l;get#c(){return this.#o.index?this.#l.index(this.#o.index):this.#l}reverse(){switch(this.#o.direction){case"nextunique":return this.direction("prevunique");case"prevunique":return this.direction("nextunique");case"prev":return this.direction("next");default:return this.direction("prev")}}forwards(){return this.direction("next")}backwards(){return this.direction("prev")}direction(e){return this.#o.direction=e,this}index(e){return this.#o.index=e,this}where(e){return this.#o.query=e,this}[Symbol.asyncIterator](){const e=this.#c.openCursor(this.#o?.query,this.#o?.direction);return new o(e)}async count(e){return await l(this.#c.count(e??this.#o?.query))}async getAll(e){return await l(this.#c.getAll(e??this.#o?.query))}async get(e){return await l(this.#c.get(e??this.#o?.query))}}class d extends EventTarget{constructor(e,t,a){super(),this.#d=e,this.#u=t,this.#m=a}#d;#u;#m;#h=!1;get ready(){return this.#h}db=null;async open(){null==this.db&&(await navigator.storage.persist()?console.log("Storage will not be cleared except by explicit user action"):console.log("Storage may be cleared by the UA under storage pressure."),this.db=await new Promise(((e,t)=>{const a=indexedDB.open(this.#d,this.#u);a.onerror=e=>{console.error("Could not open an IndexDB",e),t(e)},a.onsuccess=t=>{console.trace("DB Opened",t);const a=t.target.result;e(a)},a.onupgradeneeded=e=>{console.trace("DB Upgrade Requested",e);const t=e.target.result;let a=e.oldVersion;for(;a!=e.newVersion;)a=this.#m[a](t);console.trace("DB Migrated")}})),this.#h=!0,this.dispatchEvent(new CustomEvent("ready")))}#p=null;transaction(e,t,a){const n="readonly"==t;if(n&&null!=this.#p)return this.#p;const r=[...n?this.db.objectStoreNames:e],s=this.db.transaction(r,t,a);s.oncomplete=e=>{this.#p=null},s.onabort=e=>{console.error("DB Transaction Aborted",e),this.#p=null},s.onerror=e=>{console.error("DB Transaction Failed",e),this.#p=null},n||s.addEventListener("complete",(t=>{this.dispatchEvent(new CustomEvent("change",{detail:{stores:e}}))}));const i={};for(const e of r)i[e]=s.objectStore(e);const o={transaction:s,stores:i};return n&&(this.#p=o),o}async export(){const{stores:e}=this.transaction(this.db.objectStoreNames,"readonly"),t={};for(const a in e){const n=a;t[n]=await l(e[n].getAll())}return t}async import(e){const{stores:t}=this.transaction(this.db.objectStoreNames,"readwrite");for(const a in e){const n=a;for(const a of e[n])await l(t[n].put(a))}}onChange(e,t){this.addEventListener("change",(a=>{const n=[...a.detail.stores];for(const a of e)if(n.includes(a)){t();break}})),this.ready?t():this.addEventListener("ready",(()=>t()))}store(e,t){const{stores:a}=this.transaction([e],"readonly");return new c(a[e],t)}}const u={0:e=>{console.trace("Applying Migration 0: DB Initialisation"),e.createObjectStore("game",{keyPath:"id"}).createIndex("date","date",{unique:!1}),e.createObjectStore("profile",{keyPath:"id"}).createIndex("date","date",{unique:!1});const t=e.createObjectStore("playerMMR",{keyPath:["game","profile"]});t.createIndex("game","game",{unique:!1}),t.createIndex("profile","profile",{unique:!1}),t.createIndex("date","date",{unique:!1});const a=e.createObjectStore("playerName",{keyPath:["profile","name"]});a.createIndex("profile","profile",{unique:!1}),a.createIndex("date","date",{unique:!1});const n=e.createObjectStore("team",{keyPath:["game","number"]});n.createIndex("game","game",{unique:!1}),n.createIndex("number","number",{unique:!1}),n.createIndex("date","date",{unique:!1});const r=e.createObjectStore("teamMember",{keyPath:["game","number","profile"]});r.createIndex("game","game",{unique:!1}),r.createIndex("game_number",["game","number"],{unique:!1}),r.createIndex("profile","profile",{unique:!1}),r.createIndex("date","date",{unique:!1});const s=e.createObjectStore("event",{keyPath:["game","profile","category","label","clock"]});return s.createIndex("game","game",{unique:!1}),s.createIndex("profile","profile",{unique:!1}),s.createIndex("category","category",{unique:!1}),s.createIndex("label","label",{unique:!1}),s.createIndex("clock","clock",{unique:!1}),s.createIndex("date","date",{unique:!1}),1},1:()=>1};class m extends d{constructor(){super("HuntShowStats",1,u)}get games(){return this.#c("game")}get teams(){return this.#c("team")}get teamMembers(){return this.#c("teamMember")}get profiles(){return this.#c("profile")}get playerNames(){return this.#c("playerName")}get playerMMRs(){return this.#c("playerMMR")}get events(){return this.#c("event")}async currentPlayerName(e){let t=null,a=0;for await(const n of this.playerNames().index("profile").where(e).reverse())n.date>a&&(t=n.name,a=n.date);return t}async currentPlayerMMR(e){let t=null,a=0;for await(const n of this.playerMMRs().index("profile").where(e).reverse())n.date>a&&(t=n.mmr,a=n.date);return Number.parseInt(t)}async playerRivalry(e){const t={kills:0,deaths:0,assists:0,collateral:0};for await(const a of this.events().index("profile").where(e))switch(a.category){case"downedbyme":case"killedbyme":t.kills+=1;break;case"downedme":case"killedme":t.deaths+=1;break;case"downedbyteammate":case"killedbyteammate":t.assists+=1;break;case"downedteammate":case"killedteammate":t.collateral+=1}return t}async playerMMRStatistics(e){let t=0,a=0,n=0;for await(const r of this.playerMMRs().index("profile").where(e)){const e=Number.parseInt(r.mmr);t+=1,a+=e,n+=e*e}const r=t>0?t:1,s=t>1?t-1:1,i=a/r,o=Math.sqrt((n/r-i**2)*t/s);return{mean:i,std:Math.sqrt(o),count:t}}#c(e){return t=>this.store(e,t)}}async function h(e){const t=e.querySelector('Attr[name="MissionBagNumTeams"]'),a=Number.parseInt(t.attributes.getNamedItem("value").value),n={},r=e.querySelectorAll('Attr[name^="MissionBagTeam_"]');for(const e of r){const[t,r,s]=e.attributes.getNamedItem("name").value.split("_"),i=e.attributes.getNamedItem("value").value;null!=s&&(Number.parseInt(r)>=a||(n[r]??={members:{}},n[r][s]=i))}const s=e.querySelectorAll('Attr[name^="MissionBagPlayer_"]');for(const e of s){const[t,r,s,...i]=e.attributes.getNamedItem("name").value.split("_"),o=i.join("_"),l=e.attributes.getNamedItem("value").value;null!=o&&(Number.parseInt(r)>=a||s>=n[r].numplayers||(n[r].members[s]??={},n[r].members[s][o]=l))}const i=await async function(e){let t="";for(const a in e){const n=e[a];t+=`MMR${n.mmr} #${n.numplayers}\n`;for(const e in n.members){const a=n.members[e];t+=`(ID${a.profileid} AS ${a.blood_line_name} AT ${a.mmr})\n`}}const a=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(n),o={game:[],team:[],teamMember:[],profile:[],playerName:[],playerMMR:[],event:[]},l=Date.now();o.game.push({id:i,date:l});for(const e in n){const t=n[e];o.team.push({game:i,number:e,mmr:t.mmr,own:"true"==t.ownteam,date:l});for(const a in t.members){const n=t.members[a];o.teamMember.push({game:i,number:e,profile:n.profileid,date:l}),o.profile.push({id:n.profileid,date:l}),o.playerName.push({profile:n.profileid,name:n.blood_line_name,date:l}),o.playerMMR.push({game:i,profile:n.profileid,mmr:n.mmr,date:l});for(const e in n){if(!e.startsWith("tooltip"))continue;const t=e.split("tooltip")[1].replace("_",""),a=n[e].matchAll(p);for(const[e,r,s,c]of a){const e=60*Number.parseInt(s)+Number.parseInt(c);o.event.push({game:i,profile:n.profileid,category:t.trim(),label:r.trim(),clock:e,date:l})}}}}return o}const p=/(@.*?)~([0-9]{1,2}):([0-9]{2})/g;class g extends Array{pushBack(...e){return this.unshift(...e)}pushFront(...e){return this.push(...e)}popFront(){return this.pop()}popBack(){if(this.length)return this.splice(0,1)[0]}}class b{[Symbol.asyncIterator](){return this}#e=!1;#t=null;#a=null;#n;#r;#s(){this.#t=new Promise((e=>{this.#n=e}))}#i(){this.#a=new Promise((e=>{this.#r=e}))}#g=new g;constructor(e,t){this.#s(),this.#i();const a=async n=>{if(!await this.#t)return e.removeEventListener(t,a),this.#g.pushBack({done:!0,value:void 0}),void this.#r();this.#s(),this.#g.pushBack({done:!1,value:n}),this.#r()};e.addEventListener(t,a)}async next(){if(this.#e)return{done:!0,value:void 0};this.#n(!0),this.#g.length||await this.#a;const e=this.#g.popFront();return e.done&&(this.#e=!0),this.#i(),e}async return(){return this.#n(!1),await this.#a,this.#g.popBack()}}class y extends EventTarget{#b;#y=0;#f=5e3;#w=null;get ready(){return null!=this.#b}async openPicker(e){try{const[t]=await window.showOpenFilePicker(e);this.#b=t}catch(e){console.error(e),alert("You cannot open this file. If your file is in a system folder (e.g., 'Program Files (x86)'), then you need to create a directory junction to allow your browser to open that file.\n\nAlternatively, you can copy & paste your file into a different folder (e.g., 'Documents') to read the data once.")}}async getFile(e){this.ready||await this.openPicker(e);const t=await this.#b.getFile();this.#y>=t.lastModified||(this.#y=t.lastModified,this.dispatchEvent(new CustomEvent("change",{detail:t})))}start(){null==this.#w&&(this.#w=setInterval((()=>{this.ready&&this.getFile()}),this.#f))}stop(){null!=this.#w&&(clearInterval(this.#w),this.#w=null)}constructor(e){super(),this.#f=e?.watchInterval??this.#f,this.start()}[Symbol.asyncIterator](){return new b(this,"change")}}function f(e){const t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.setAttribute("download",e.name),a.addEventListener("click",(()=>setTimeout((()=>{a.remove()})))),a.click()}class w extends HTMLTableCellElement{static define(){customElements.define("hss-table-header-sortable",this,{extends:"th"})}connectedCallback(){this.addEventListener("click",(()=>this.sort()))}sort(){const e=this.closest("table");var t,a,n;t=e.getElementsByTagName("tbody")[0],a=Array.from(this.parentNode.children).indexOf(this),n=!e.toggleAttribute("ascending"),Array.from(t.rows).sort(((e,t)=>{return r=v(n?e:t,a),s=v(n?t:e,a),"number"!=typeof r||"number"!=typeof s||isNaN(r)||isNaN(s)?r.toString().localeCompare(s.toString()):r-s;var r,s})).forEach((e=>t.appendChild(e)))}}function v(e,t){return(e=>e.sortProperty||e.textContent)(e.children[t])}class x extends HTMLTableElement{static#v;static define(e){this.#v=e,customElements.define("hss-table-games",this,{extends:"table"})}connectedCallback(){x.#v.onChange(["game","teamMember"],(()=>this.update()))}async update(){const e=this.querySelector("tbody"),t=[];for await(const a of x.#v.games().index("date")){if(e.querySelector(`tr[game="${a.id}"]`))continue;const n=await x.#v.teamMembers().index("game").count(a.id),r=document.createElement("tr"),s=document.createElement("td"),i=document.createElement("time"),o=document.createElement("td");s.append(i),r.append(s,o),t.push(r),r.setAttribute("game",a.id),r.toggleAttribute("clickable",!0),r.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("gameChosen",{detail:a}))})),i.textContent=new Date(a.date).toLocaleString(),i.setAttribute("datetime",a.date.toString()),s.sortProperty=a.date,o.textContent=n.toString(),o.sortProperty=n}e.append(...t),e.toggleAttribute("hidden",!1)}}class _ extends HTMLTableElement{static#v;static define(e){this.#v=e,customElements.define("hss-table-players",this,{extends:"table"})}connectedCallback(){_.#v.onChange(["profile","playerName","playerMMR","teamMember","event"],(()=>this.update()))}async update(){const e=this.querySelector("tbody"),t=[];for await(const a of _.#v.profiles()){const n=await _.#v.playerRivalry(a.id),r=await _.#v.currentPlayerName(a.id),s=await _.#v.playerMMRs().index("profile").getAll(a.id),i=await _.#v.teamMembers().index("profile").count(a.id),o=e.querySelector(`tr[profile="${a.id}"]`)??(()=>{const e=document.createElement("tr");e.setAttribute("profile",a.id),e.toggleAttribute("clickable",!0),e.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("profileChosen",{detail:a}))}));const n=document.createElement("td");n.toggleAttribute("name",!0);const r=document.createElement("td");r.toggleAttribute("mmr",!0);const s=document.createElement("td");s.toggleAttribute("kills",!0);const i=document.createElement("td");i.toggleAttribute("deaths",!0);const o=document.createElement("td");o.toggleAttribute("assists",!0);const l=document.createElement("td");return l.toggleAttribute("games",!0),e.append(n,r,s,i,o,l),t.push(e),e})(),l=o.querySelector("td[name]"),c=o.querySelector("td[mmr]"),d=o.querySelector("td[kills]"),u=o.querySelector("td[deaths]"),m=o.querySelector("td[assists]"),h=o.querySelector("td[games]");s.sort(((e,t)=>t.date-e.date)),l.textContent=r,l.sortProperty=r.toLowerCase(),c.textContent=s[0].mmr,c.sortProperty=Number.parseInt(s[0].mmr),h.textContent=i.toString(),h.sortProperty=i,d.textContent=n.kills.toString(),d.sortProperty=n.kills,u.textContent=n.deaths.toString(),u.sortProperty=n.deaths,m.textContent=n.assists.toString(),m.sortProperty=n.assists}e.append(...t),e.toggleAttribute("hidden",!1)}}class k extends HTMLSpanElement{static define(){customElements.define("hss-span-storage-use",this,{extends:"span"})}#w;connectedCallback(){this.#w&&clearInterval(this.#w),this.#w=setInterval((async()=>{await this.update()}),6e4),this.update()}disconnectedCallback(){this.#w&&clearInterval(this.#w)}#x=0;#_=0;async update(){const e=await navigator.storage.estimate();if((e.usage??0!==this.#x)||(e.quota??0!==this.#_)){this.#x=e.usage??0,this.#_=e.quota??0;const t=`${M(this.#x).toFixed(2)} MB`,a=`${M(this.#_).toFixed(2)} MB`;this.textContent=`${t} / ${a}`}}}const M=e=>e/1024/1024;class S extends HTMLTableElement{static#v;static define(e){this.#v=e,customElements.define("hss-table-game-teams",this,{extends:"table"})}static get observedAttributes(){return["game"]}attributeChangedCallback(e,t,a){if(t!==a)return"game"===e?this.game=a:void 0}#k=null;get game(){return this.#k}set game(e){const t=this.#k!=e;this.#k=e,t&&(this.setAttribute("game",e),this.update())}connectedCallback(){S.#v.onChange(["teamMember","team","playerName","playerMMR","profile"],(()=>this.update()))}async update(){const e=this.querySelector("tbody");if(null==this.game)return void e.toggleAttribute("hidden",!0);let t={};const a=[];for await(const e of S.#v.teamMembers().index("game").where(this.game)){const n=await S.#v.profiles().get(e.profile),r=await S.#v.teams().get([this.game,e.number]),s=await S.#v.playerMMRs().get([this.game,e.profile]),i=[],o=document.createElement("tr");if(o.setAttribute("player",e.profile),o.toggleAttribute("own",r?.own??!1),o.toggleAttribute("clickable",!0),o.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("profileChosen",{detail:n}))})),!t[e.number]){const a=await S.#v.teamMembers().index("game_number").count([this.game,e.number]),n=document.createElement("td");n.setAttribute("rowspan",a.toString()),n.textContent=e.number,t[e.number]=!0,i.push(n)}const l=document.createElement("td");l.textContent=await S.#v.currentPlayerName(e.profile),i.push(l);const c=document.createElement("td");c.textContent=s.mmr,i.push(c),o.append(...i),a.push(o)}e.replaceChildren(...a),e.toggleAttribute("hidden",!1)}}class E extends HTMLOListElement{static#v;static define(e){this.#v=e,customElements.define("hss-ol-game-events",this,{extends:"ol"})}static get observedAttributes(){return["game"]}attributeChangedCallback(e,t,a){if(t!==a)return"game"===e?this.game=a:void 0}#k=null;get game(){return this.#k}set game(e){const t=this.#k!=e;this.#k=e,t&&(this.setAttribute("game",e),this.update())}connectedCallback(){E.#v.onChange(["event","playerName"],(()=>this.update()))}async update(){if(null==this.game)return void this.toggleAttribute("hidden",!0);const e=await E.#v.events().index("game").getAll(this.game);e.sort(((e,t)=>e.clock-t.clock));const t=[];for(const a of e){const e=document.createElement("li");t.push(e);const n=a.clock%60,r=`${((a.clock-n)/60).toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`,s=await E.#v.currentPlayerName(a.profile),i=(P[a.category]??a.category,C[a.label]??a.label),o=document.createElement("b");o.textContent=r;const l=document.createElement("span");l.textContent=" ";const c=document.createElement("em");c.textContent=s;const d=document.createElement("span");d.textContent=" ";const u=document.createElement("span");u.textContent=i,e.append(o,l,c,d,u)}this.replaceChildren(...t),this.toggleAttribute("hidden",!1)}}const P={bountyextracted:"Bounty Extracted",bountypickedup:"Bounty Picked Up",downedbyme:"Downed By Me",downedbyteammate:"Downed By Teammate",downedme:"Downed Me",downedteammate:"Downed Teammate",killedbyme:"Killed By Me",killedbyteammate:"Killed By Teammate",killedme:"Killed Me",killedteammate:"Killed Teammate"},C={"@ui_mmr_killed_hunter ~~@ui_team_details_killed":"Was Killed By Me","@ui_mmr_died_to_hunter ~~@ui_team_details_killed":"Killed Me","@ui_team_details_carried_bounty":"Picked Up Bounty","@ui_team_details_hunter_downed_teammate ~~@ui_team_details_downed":"Downed Teammate","@ui_team_details_downed":"Downed Teammate","@ui_team_details_hunter_downed_you ~~@ui_team_details_downed":"Downed Me","@ui_team_details_killed_by_team_mate ~~@ui_team_details_downed":"Was Killed By Teammate","@ui_team_details_killed_by_team_mate ~~@ui_team_details_killed":"Was Killed By Teammate","@ui_team_details_killed_team_mate ~~@ui_team_details_downed":"Downed Teammate","@ui_team_details_killed_team_mate ~~@ui_team_details_killed":"Killed Teammate","@ui_team_details_killed":"Killed Teammate","@ui_team_details_teammate_downed_hunter ~~@ui_team_details_downed":"Was Downed By Teammate","@ui_team_details_you_downed_hunter ~~@ui_team_details_downed":"Was Downed By Me","@ui_team_details_extracted_bounty":"Extracted With Bounty"};let q=null;async function A(e,t){const a=document.createElement("canvas"),n=[];for(const t of e)n.push({label:t.name,data:t.data,borderWidth:1});const r={y:{type:"linear",suggestedMin:2500,suggestedMax:3e3,grid:{color:"#888"}},x:{type:"linear",position:"bottom",grid:{color:"#888"},ticks:{callback:e=>new Date(e).toLocaleString()}}},i={};for(const[e,t]of I.entries())i[`star${e}`]={type:"line",yMin:t,yMax:t,borderColor:"#888",borderWidth:.5};return null!=t&&(i.dateHighlight={type:"line",xMin:t,xMax:t,borderColor:"#888",borderWidth:.5}),new(await async function(){if(null==q){const{Chart:e,LinearScale:t,LineController:a,PointElement:n,LineElement:r,plugins:i}=await s.e(148).then(s.bind(s,148)),o=await Promise.all([s.e(148),s.e(282)]).then(s.bind(s,282));e.register(t,a,n,r,i.Tooltip,i.Colors,i.Legend,o),q=e}return q}())(a,{type:"line",data:{datasets:n},options:{scales:r,plugins:{annotation:{annotations:i}}}}),a}const I=[2e3,2300,2600,2750,3e3];class T extends HTMLDialogElement{static#v;static define(e){this.#v=e,customElements.define("hss-dialog-game-details",this,{extends:"dialog"})}static get observedAttributes(){return["game"]}attributeChangedCallback(e,t,a){if(t!==a)return"game"===e?this.game=a:void 0}#k=null;get game(){return this.#k}set game(e){const t=this.#k!=e;this.#k=e,t&&(this.setAttribute("game",e),this.update())}connectedCallback(){T.#v.onChange(["game","teamMember","playerName","playerMMR"],(()=>this.update()))}async update(){if(null==this.game)return void this.close();this.querySelector("table#gamePlayers").game=this.game,this.querySelector("ol#gameEvents").game=this.game;const e=await T.#v.games().get(this.game),t=[];for await(const e of T.#v.teamMembers().index("game").where(this.game)){const a=[];for await(const t of T.#v.playerMMRs().index("profile").where(e.profile))a.push({x:t.date,y:Number.parseInt(t.mmr)});a.sort(((e,t)=>t.x-e.x)),t.push({name:await T.#v.currentPlayerName(e.profile),data:a})}const a=new Date(e.date);this.querySelector("em").textContent=a.toLocaleString();const n=this.querySelector("div[mmr-chart]"),r=await A(t,e.date);n.replaceChildren(r)}showModal(){this.open||super.showModal()}}class N extends HTMLDialogElement{static#v;static define(e){this.#v=e,customElements.define("hss-dialog-player-details",this,{extends:"dialog"})}static get observedAttributes(){return["profile"]}attributeChangedCallback(e,t,a){if(t!==a)return"profile"===e?this.profile=a:void 0}#M=null;get profile(){return this.#M}set profile(e){const t=this.#M!=e;this.#M=e,t&&(this.setAttribute("profile",e),this.update())}connectedCallback(){N.#v.onChange(["playerName","playerMMR","event"],(()=>this.update()))}async update(){if(null==this.profile)return void this.close();const e=await N.#v.currentPlayerName(this.profile),t=await N.#v.playerMMRs().index("profile").getAll(this.profile),a=this.querySelector("div#chartArea"),n=this.querySelector("a[name]");n.textContent=e,n.href=`https://www.steamidfinder.com/lookup/${e}/`,n.target="_blank",this.querySelector("span[profile]").textContent=this.profile,t.sort(((e,t)=>e.date-t.date));const r=[{name:e,data:[...t.map((e=>({x:e.date,y:Number.parseInt(e.mmr)})))]}],s=await A(r);a.replaceChildren(s);const i=await N.#v.playerMMRStatistics(this.profile);this.querySelector("span[mmrAverage]").textContent=Math.floor(i.mean).toString(),this.querySelector("span[mmrStd]").textContent=Math.floor(i.std).toString();const o=await N.#v.playerRivalry(this.profile);this.querySelector("span[kills]").textContent=o.kills.toString(),this.querySelector("span[deaths]").textContent=o.deaths.toString(),this.querySelector("span[assists]").textContent=o.assists.toString(),this.querySelector("span[collateral]").textContent=o.collateral.toString()}showModal(){this.open||super.showModal()}}!async function(){const e=new m,t=new y;k.define(),w.define(),x.define(e),_.define(e),S.define(e),E.define(e),T.define(e),N.define(e),await e.open();const a=document.getElementById("fileButton"),n=document.querySelector("footer input#import"),r=document.getElementById("importButton"),s=document.getElementById("exportButton"),i=document.getElementById("games"),o=document.getElementById("players"),l=document.getElementById("gamePlayers"),c=document.querySelector("dialog#gameDetails"),d=document.querySelector("dialog#playerDetails");await async function(...e){return Promise.all(e.map((e=>e())))}((async()=>{for await(const a of t){const t=await a.detail.text(),n=(new DOMParser).parseFromString(t,"application/xml"),r=await h(n);await e.import(r)}}),(async()=>{for await(const e of new b(a,"click")){await t.getFile({types:[{description:"Hunt Showdown Attributes",accept:{"text/xml":[".xml"]}}],excludeAcceptAllOption:!0,multiple:!1}),a.toggleAttribute("hidden",!0);break}}),(async()=>{for await(const e of new b(r,"click"))n.click()}),(async()=>{for await(const t of new b(n,"change")){const t=await n.files[0].text(),a=JSON.parse(t);await e.import(a)}}),(async()=>{for await(const t of new b(s,"click")){const t=await e.export(),a=JSON.stringify(t,null,2);f(new File([a],"export.json",{type:"application/json"}))}}),(async()=>{for await(const e of new b(i,"gameChosen"))c.game=e.detail.id,c.showModal()}),(async()=>{for await(const e of new b(o,"profileChosen"))d.profile=e.detail.id,d.showModal()}),(async()=>{for await(const e of new b(l,"profileChosen"))d.profile=e.detail.id,d.showModal()}))}(),i=s.O(i)})();
(()=>{"use strict";var e,t,a,n={},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return n[e](a,a.exports,i),a.exports}i.m=n,e=[],i.O=(t,a,n,r)=>{if(!a){var s=1/0;for(c=0;c<e.length;c++){for(var[a,n,r]=e[c],o=!0,l=0;l<a.length;l++)(!1&r||s>=r)&&Object.keys(i.O).every((e=>i.O[e](a[l])))?a.splice(l--,1):(o=!1,r<s&&(s=r));if(o){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,n,r]},i.F={},i.E=e=>{Object.keys(i.F).map((t=>{i.F[t](e)}))},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,a)=>(i.f[a](e,t),t)),[])),i.u=e=>e+".bundle.js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="bushrat-site:",i.l=(e,n,r,s)=>{if(t[e])t[e].push(n);else{var o,l;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var u=d[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==a+r){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",a+r),o.src=e),t[e]=[n];var m=(a,n)=>{o.onerror=o.onload=null,clearTimeout(h);var r=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(n))),a)return a(n)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=m.bind(null,o.onerror),o.onload=m.bind(null,o.onload),l&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var n=a.length-1;n>-1&&!e;)e=a[n--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={179:0};i.f.j=(t,a)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)a.push(n[2]);else{var r=new Promise(((a,r)=>n=e[t]=[a,r]));a.push(n[2]=r);var s=i.p+i.u(t),o=new Error;i.l(s,(a=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",o.name="ChunkLoadError",o.type=r,o.request=s,n[1](o)}}),"chunk-"+t,t)}},i.F.j=t=>{if(!i.o(e,t)||void 0===e[t]){e[t]=null;var a=document.createElement("link");i.nc&&a.setAttribute("nonce",i.nc),a.rel="prefetch",a.as="script",a.href=i.p+i.u(t),document.head.appendChild(a)}},i.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[s,o,l]=a,d=0;if(s.some((t=>0!==e[t]))){for(n in o)i.o(o,n)&&(i.m[n]=o[n]);if(l)var c=l(i)}for(t&&t(a);d<s.length;d++)r=s[d],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(c)},a=self.webpackChunkbushrat_site=self.webpackChunkbushrat_site||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),i.O(0,[179],(()=>{i.E(148),i.E(282)}),5);var s={};class o{[Symbol.asyncIterator](){return this}#e=!1;#t=null;#a=null;#n;#r;constructor(e){this.#t=new Promise((e=>{this.#n=e})),this.#a=new Promise((e=>{this.#r=e})),e.onsuccess=async e=>{const t=e.target.result;if(!await this.#t||!t)return this.#r({done:!0,value:void 0});this.#t=new Promise((e=>{this.#n=e}));const a=t.value;this.#r({done:!1,value:a}),t.continue()}}async next(){if(this.#e)return{done:!0,value:void 0};this.#n(!0);const e=await this.#a;return e.done&&(this.#e=!0),this.#a=new Promise((e=>{this.#r=e})),e}async all(){const e=[];for await(const t of this)e.push(t);return e}}function l(e){return new Promise(((t,a)=>{e.onsuccess=e=>{const a=e.target.result;t(a)},e.onerror=e=>{console.error("DB Operation Failed",e),a(e)}}))}class d{#i;constructor(e,t){this.#i=t??{},this.#s=e}#s;get#o(){return this.#i.index?this.#s.index(this.#i.index):this.#s}reverse(){switch(this.#i.direction){case"next":default:this.#i.direction="prev";break;case"prev":this.#i.direction="next";break;case"nextunique":this.#i.direction="prevunique";break;case"prevunique":this.#i.direction="nextunique"}return this}forwards(){return this.direction("next")}backwards(){return this.direction("prev")}direction(e){return this.#i.direction=e,this}index(e){return this.#i.index=e,this}where(e){return this.#i.query=e,this}[Symbol.asyncIterator](){const e=this.#o.openCursor(this.#i?.query,this.#i?.direction);return new o(e)}async count(e){return await l(this.#o.count(e??this.#i?.query))}async getAll(e){return await l(this.#o.getAll(e??this.#i?.query))}async get(e){return await l(this.#o.get(e??this.#i?.query))}}class c extends EventTarget{constructor(e,t,a){super(),this.#l=e,this.#d=t,this.#c=a}#l;#d;#c;#u=!1;get ready(){return this.#u}db=null;async open(){null==this.db&&(await navigator.storage.persist()?console.log("Storage will not be cleared except by explicit user action"):console.log("Storage may be cleared by the UA under storage pressure."),this.db=await new Promise(((e,t)=>{const a=indexedDB.open(this.#l,this.#d);a.onerror=e=>{console.error("Could not open an IndexDB",e),t(e)},a.onsuccess=t=>{console.trace("DB Opened",t);const a=t.target.result;e(a)},a.onupgradeneeded=e=>{console.trace("DB Upgrade Requested",e);const t=e.target.result;let a=e.oldVersion;for(;a!=e.newVersion;)a=this.#c[a](t);console.trace("DB Migrated")}})),this.#u=!0,this.dispatchEvent(new CustomEvent("ready")))}#m=null;transaction(e,t,a){const n="readonly"==t;if(n&&null!=this.#m)return this.#m;const r=[...n?this.db.objectStoreNames:e],i=this.db.transaction(r,t,a);i.oncomplete=e=>{this.#m=null},i.onerror=e=>{console.error("DB Transaction Failed",e),this.#m=null},n||i.addEventListener("complete",(t=>{this.dispatchEvent(new CustomEvent("change",{detail:{stores:e}}))}));const s={};for(const e of r)s[e]=i.objectStore(e);const o={transaction:i,stores:s};return n&&(this.#m=o),o}async export(){const{stores:e}=this.transaction(this.db.objectStoreNames,"readonly"),t={};for(const a in e){const n=a;t[n]=await l(e[n].getAll())}return t}async import(e){const{stores:t}=this.transaction(this.db.objectStoreNames,"readwrite");for(const a in e){const n=a;for(const a of e[n])await l(t[n].put(a))}}onChange(e,t){this.addEventListener("change",(a=>{const n=[...a.detail.stores];for(const a of e)if(n.includes(a)){t();break}})),this.ready?t():this.addEventListener("ready",(()=>t()))}store(e,t){const{stores:a}=this.transaction([e],"readonly");return new d(a[e],t)}}const u={0:e=>{console.trace("Applying Migration 0: DB Initialisation"),e.createObjectStore("game",{keyPath:"id"}).createIndex("date","date",{unique:!1}),e.createObjectStore("profile",{keyPath:"id"}).createIndex("date","date",{unique:!1});const t=e.createObjectStore("playerMMR",{keyPath:["game","profile"]});t.createIndex("game","game",{unique:!1}),t.createIndex("profile","profile",{unique:!1}),t.createIndex("date","date",{unique:!1});const a=e.createObjectStore("playerName",{keyPath:["profile","name"]});a.createIndex("profile","profile",{unique:!1}),a.createIndex("date","date",{unique:!1});const n=e.createObjectStore("team",{keyPath:["game","number"]});n.createIndex("game","game",{unique:!1}),n.createIndex("number","number",{unique:!1}),n.createIndex("date","date",{unique:!1});const r=e.createObjectStore("teamMember",{keyPath:["game","number","profile"]});r.createIndex("game","game",{unique:!1}),r.createIndex("game_number",["game","number"],{unique:!1}),r.createIndex("profile","profile",{unique:!1}),r.createIndex("date","date",{unique:!1});const i=e.createObjectStore("event",{keyPath:["game","profile","category","label","clock"]});return i.createIndex("game","game",{unique:!1}),i.createIndex("profile","profile",{unique:!1}),i.createIndex("category","category",{unique:!1}),i.createIndex("label","label",{unique:!1}),i.createIndex("clock","clock",{unique:!1}),i.createIndex("date","date",{unique:!1}),1},1:()=>1};class m extends c{constructor(){super("HuntShowStats",1,u)}async currentPlayerName(e){let t=null,a=0;for await(const n of this.playerNames().index("profile").where(e).reverse())n.date>a&&(t=n.name,a=n.date);return t}async currentPlayerMMR(e){let t=null,a=0;for await(const n of this.playerMMRs().index("profile").where(e).reverse())n.date>a&&(t=n.mmr,a=n.date);return Number.parseInt(t)}async playerRivalry(e){const t={kills:0,deaths:0,assists:0,collateral:0};for await(const a of this.events().index("profile").where(e))switch(a.category){case"downedbyme":case"killedbyme":t.kills+=1;break;case"downedme":case"killedme":t.deaths+=1;break;case"downedbyteammate":case"killedbyteammate":t.assists+=1;break;case"downedteammate":case"killedteammate":t.collateral+=1}return t}async playerMMRStatistics(e){let t=0,a=0,n=0;for await(const r of this.playerMMRs().index("profile").where(e)){const e=Number.parseInt(r.mmr);t+=1,a+=e,n+=e*e}const r=t>0?t:1,i=t>1?t-1:1,s=a/r,o=Math.sqrt((n/r-s**2)*t/i);return{mean:s,std:Math.sqrt(o),count:t}}get games(){return e=>this.store("game",e)}get teams(){return e=>this.store("team",e)}get teamMembers(){return e=>this.store("teamMember",e)}get profiles(){return e=>this.store("profile",e)}get playerNames(){return e=>this.store("playerName",e)}get playerMMRs(){return e=>this.store("playerMMR",e)}get events(){return e=>this.store("event",e)}}async function h(e){const t=e.querySelector('Attr[name="MissionBagNumTeams"]'),a=Number.parseInt(t.attributes.getNamedItem("value").value),n={},r=e.querySelectorAll('Attr[name^="MissionBagTeam_"]');for(const e of r){const[t,r,i]=e.attributes.getNamedItem("name").value.split("_"),s=e.attributes.getNamedItem("value").value;null!=i&&(Number.parseInt(r)>=a||(n[r]??={members:{}},n[r][i]=s))}const i=e.querySelectorAll('Attr[name^="MissionBagPlayer_"]');for(const e of i){const[t,r,i,...s]=e.attributes.getNamedItem("name").value.split("_"),o=s.join("_"),l=e.attributes.getNamedItem("value").value;null!=o&&(Number.parseInt(r)>=a||i>=n[r].numplayers||(n[r].members[i]??={},n[r].members[i][o]=l))}const s=await async function(e){let t="";for(const a in e){const n=e[a];t+=`MMR${n.mmr} #${n.numplayers}\n`;for(const e in n.members){const a=n.members[e];t+=`(ID${a.profileid} AS ${a.blood_line_name} AT ${a.mmr})\n`}}const a=(new TextEncoder).encode(t),n=await crypto.subtle.digest("SHA-256",a);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(n),o={game:[],team:[],teamMember:[],profile:[],playerName:[],playerMMR:[],event:[]},l=Date.now();o.game.push({id:s,date:l});for(const e in n){const t=n[e];o.team.push({game:s,number:e,mmr:t.mmr,own:"true"==t.ownteam,date:l});for(const a in t.members){const n=t.members[a];o.teamMember.push({game:s,number:e,profile:n.profileid,date:l}),o.profile.push({id:n.profileid,date:l}),o.playerName.push({profile:n.profileid,name:n.blood_line_name,date:l}),o.playerMMR.push({game:s,profile:n.profileid,mmr:n.mmr,date:l});for(const e in n){if(!e.startsWith("tooltip"))continue;const t=e.split("tooltip")[1].replace("_",""),a=n[e].matchAll(p);for(const[e,r,i,d]of a){const e=60*Number.parseInt(i)+Number.parseInt(d);o.event.push({game:s,profile:n.profileid,category:t.trim(),label:r.trim(),clock:e,date:l})}}}}return o}const p=/(@.*?)~([0-9]{1,2}):([0-9]{2})/g;class g{[Symbol.asyncIterator](){return this}#e=!1;#t=null;#a=null;#n;#r;constructor(e,t){this.#t=new Promise((e=>{this.#n=e})),this.#a=new Promise((e=>{this.#r=e}));const a=async n=>{if(!await this.#t)return e.removeEventListener(t,a),void this.#r({done:!0,value:void 0});this.#t=new Promise((e=>{this.#n=e})),this.#r({done:!1,value:n})};e.addEventListener(t,a)}async next(){if(this.#e)return{done:!0,value:void 0};this.#n(!0);const e=await this.#a;return e.done&&(this.#e=!0),this.#a=new Promise((e=>{this.#r=e})),e}async return(){return this.#n(!1),await this.#a}}class b extends EventTarget{#h;#p=0;#g=5e3;#b=null;get ready(){return null!=this.#h}async openPicker(e){try{const[t]=await window.showOpenFilePicker(e);this.#h=t}catch(e){console.error(e),alert("You cannot open this file. If your file is in a system folder (e.g., 'Program Files (x86)'), then you need to create a directory junction to allow your browser to open that file.\n\nAlternatively, you can copy & paste your file into a different folder (e.g., 'Documents') to read the data once.")}}async getFile(e){this.ready||await this.openPicker(e);const t=await this.#h.getFile();this.#p>=t.lastModified||(this.#p=t.lastModified,this.dispatchEvent(new CustomEvent("change",{detail:t})))}start(){null==this.#b&&(this.#b=setInterval((()=>{this.ready&&this.getFile()}),this.#g))}stop(){null!=this.#b&&(clearInterval(this.#b),this.#b=null)}constructor(e){super(),this.#g=e?.watchInterval??this.#g,this.start()}[Symbol.asyncIterator](){return new g(this,"change")}}class y extends HTMLTableCellElement{static define(){customElements.define("hss-table-header-sortable",this,{extends:"th"})}connectedCallback(){this.addEventListener("click",(()=>this.sort()))}sort(){const e=this.closest("table");var t,a,n;t=e.getElementsByTagName("tbody")[0],a=Array.from(this.parentNode.children).indexOf(this),n=!e.toggleAttribute("ascending"),Array.from(t.rows).sort(((e,t)=>{return r=f(n?e:t,a),i=f(n?t:e,a),"number"!=typeof r||"number"!=typeof i||isNaN(r)||isNaN(i)?r.toString().localeCompare(i.toString()):r-i;var r,i})).forEach((e=>t.appendChild(e)))}}function f(e,t){return(e=>e.sortProperty||e.textContent)(e.children[t])}class w extends HTMLTableElement{static#y;static define(e){this.#y=e,customElements.define("hss-table-games",this,{extends:"table"})}connectedCallback(){w.#y.onChange(["game","teamMember"],(()=>this.update()))}async update(){const e=this.querySelector("tbody"),t=[];for await(const a of w.#y.games().index("date")){if(e.querySelector(`tr[game="${a.id}"]`))continue;const n=await w.#y.teamMembers().index("game").count(a.id),r=document.createElement("tr"),i=document.createElement("td"),s=document.createElement("time"),o=document.createElement("td");i.append(s),r.append(i,o),t.push(r),r.setAttribute("game",a.id),r.toggleAttribute("clickable",!0),r.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("gameChosen",{detail:a}))})),s.textContent=new Date(a.date).toLocaleString(),s.setAttribute("datetime",a.date.toString()),i.sortProperty=a.date,o.textContent=n.toString(),o.sortProperty=n}e.append(...t),e.toggleAttribute("hidden",!1)}}class v extends HTMLTableElement{static#y;static define(e){this.#y=e,customElements.define("hss-table-players",this,{extends:"table"})}connectedCallback(){v.#y.onChange(["profile","playerName","playerMMR","teamMember","event"],(()=>this.update()))}async update(){const e=this.querySelector("tbody"),t=[];for await(const a of v.#y.profiles()){const n=await v.#y.playerRivalry(a.id),r=await v.#y.currentPlayerName(a.id),i=await v.#y.playerMMRs().index("profile").getAll(a.id),s=await v.#y.teamMembers().index("profile").count(a.id),o=e.querySelector(`tr[profile="${a.id}"]`)??(()=>{const e=document.createElement("tr");e.setAttribute("profile",a.id),e.toggleAttribute("clickable",!0),e.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("profileChosen",{detail:a}))}));const n=document.createElement("td");n.toggleAttribute("name",!0);const r=document.createElement("td");r.toggleAttribute("mmr",!0);const i=document.createElement("td");i.toggleAttribute("kills",!0);const s=document.createElement("td");s.toggleAttribute("deaths",!0);const o=document.createElement("td");o.toggleAttribute("assists",!0);const l=document.createElement("td");return l.toggleAttribute("games",!0),e.append(n,r,i,s,o,l),t.push(e),e})(),l=o.querySelector("td[name]"),d=o.querySelector("td[mmr]"),c=o.querySelector("td[kills]"),u=o.querySelector("td[deaths]"),m=o.querySelector("td[assists]"),h=o.querySelector("td[games]");i.sort(((e,t)=>t.date-e.date)),l.textContent=r,l.sortProperty=r.toLowerCase(),d.textContent=i[0].mmr,d.sortProperty=Number.parseInt(i[0].mmr),h.textContent=s.toString(),h.sortProperty=s,c.textContent=n.kills.toString(),c.sortProperty=n.kills,u.textContent=n.deaths.toString(),u.sortProperty=n.deaths,m.textContent=n.assists.toString(),m.sortProperty=n.assists}e.append(...t),e.toggleAttribute("hidden",!1)}}class x extends HTMLSpanElement{static define(){customElements.define("hss-span-storage-use",this,{extends:"span"})}#b;connectedCallback(){this.#b&&clearInterval(this.#b),this.#b=setInterval((async()=>{await this.update()}),6e4),this.update()}disconnectedCallback(){this.#b&&clearInterval(this.#b)}#f=0;#w=0;async update(){const e=await navigator.storage.estimate();if((e.usage??0!==this.#f)||(e.quota??0!==this.#w)){this.#f=e.usage??0,this.#w=e.quota??0;const t=`${_(this.#f).toFixed(2)} MB`,a=`${_(this.#w).toFixed(2)} MB`;this.textContent=`${t} / ${a}`}}}const _=e=>e/1024/1024;class k extends HTMLTableElement{static#y;static define(e){this.#y=e,customElements.define("hss-table-game-teams",this,{extends:"table"})}static get observedAttributes(){return["game"]}attributeChangedCallback(e,t,a){if(t!==a)return"game"===e?this.game=a:void 0}#v=null;get game(){return this.#v}set game(e){const t=this.#v!=e;this.#v=e,t&&(this.setAttribute("game",e),this.update())}connectedCallback(){k.#y.onChange(["teamMember","team","playerName","playerMMR","profile"],(()=>this.update()))}async update(){const e=this.querySelector("tbody");if(null==this.game)return void e.toggleAttribute("hidden",!0);let t={};const a=[];for await(const e of k.#y.teamMembers().index("game").where(this.game)){const n=await k.#y.profiles().get(e.profile),r=await k.#y.teams().get([this.game,e.number]),i=await k.#y.playerMMRs().get([this.game,e.profile]),s=[],o=document.createElement("tr");if(o.setAttribute("player",e.profile),o.toggleAttribute("own",r?.own??!1),o.toggleAttribute("clickable",!0),o.addEventListener("click",(()=>{this.dispatchEvent(new CustomEvent("profileChosen",{detail:n}))})),!t[e.number]){const a=await k.#y.teamMembers().index("game_number").count([this.game,e.number]),n=document.createElement("td");n.setAttribute("rowspan",a.toString()),n.textContent=e.number,t[e.number]=!0,s.push(n)}const l=document.createElement("td");l.textContent=await k.#y.currentPlayerName(e.profile),s.push(l);const d=document.createElement("td");d.textContent=i.mmr,s.push(d),o.append(...s),a.push(o)}e.replaceChildren(...a),e.toggleAttribute("hidden",!1)}}class M extends HTMLOListElement{static#y;static define(e){this.#y=e,customElements.define("hss-ol-game-events",this,{extends:"ol"})}static get observedAttributes(){return["game"]}attributeChangedCallback(e,t,a){if(t!==a)return"game"===e?this.game=a:void 0}#v=null;get game(){return this.#v}set game(e){const t=this.#v!=e;this.#v=e,t&&(this.setAttribute("game",e),this.update())}connectedCallback(){M.#y.onChange(["event","playerName"],(()=>this.update()))}async update(){if(null==this.game)return void this.toggleAttribute("hidden",!0);const e=await M.#y.events().index("game").getAll(this.game);e.sort(((e,t)=>e.clock-t.clock));const t=[];for(const a of e){const e=document.createElement("li");t.push(e);const n=a.clock%60,r=`${((a.clock-n)/60).toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`,i=await M.#y.currentPlayerName(a.profile),s=(E[a.category]??a.category,S[a.label]??a.label),o=document.createElement("b");o.textContent=r;const l=document.createElement("span");l.textContent=" ";const d=document.createElement("em");d.textContent=i;const c=document.createElement("span");c.textContent=" ";const u=document.createElement("span");u.textContent=s,e.append(o,l,d,c,u)}this.replaceChildren(...t),this.toggleAttribute("hidden",!1)}}const E={bountyextracted:"Bounty Extracted",bountypickedup:"Bounty Picked Up",downedbyme:"Downed By Me",downedbyteammate:"Downed By Teammate",downedme:"Downed Me",downedteammate:"Downed Teammate",killedbyme:"Killed By Me",killedbyteammate:"Killed By Teammate",killedme:"Killed Me",killedteammate:"Killed Teammate"},S={"@ui_mmr_killed_hunter ~~@ui_team_details_killed":"Was Killed By Me","@ui_mmr_died_to_hunter ~~@ui_team_details_killed":"Killed Me","@ui_team_details_carried_bounty":"Picked Up Bounty","@ui_team_details_hunter_downed_teammate ~~@ui_team_details_downed":"Downed Teammate","@ui_team_details_downed":"Downed Teammate","@ui_team_details_hunter_downed_you ~~@ui_team_details_downed":"Downed Me","@ui_team_details_killed_by_team_mate ~~@ui_team_details_downed":"Was Killed By Teammate","@ui_team_details_killed_by_team_mate ~~@ui_team_details_killed":"Was Killed By Teammate","@ui_team_details_killed_team_mate ~~@ui_team_details_downed":"Downed Teammate","@ui_team_details_killed_team_mate ~~@ui_team_details_killed":"Killed Teammate","@ui_team_details_killed":"Killed Teammate","@ui_team_details_teammate_downed_hunter ~~@ui_team_details_downed":"Was Downed By Teammate","@ui_team_details_you_downed_hunter ~~@ui_team_details_downed":"Was Downed By Me","@ui_team_details_extracted_bounty":"Extracted With Bounty"};let C=null;async function P(e,t){const a=document.createElement("canvas"),n=[];for(const t of e)n.push({label:t.name,data:t.data,borderWidth:1});const r={y:{type:"linear",suggestedMin:2500,suggestedMax:3e3,grid:{color:"#888"}},x:{type:"linear",position:"bottom",grid:{color:"#888"},ticks:{callback:e=>new Date(e).toLocaleString()}}},s={};for(const[e,t]of q.entries())s[`star${e}`]={type:"line",yMin:t,yMax:t,borderColor:"#888",borderWidth:.5};return null!=t&&(s.dateHighlight={type:"line",xMin:t,xMax:t,borderColor:"#888",borderWidth:.5}),new(await async function(){if(null==C){const{Chart:e,LinearScale:t,LineController:a,PointElement:n,LineElement:r,plugins:s}=await i.e(148).then(i.bind(i,148)),o=await Promise.all([i.e(148),i.e(282)]).then(i.bind(i,282));e.register(t,a,n,r,s.Tooltip,s.Colors,s.Legend,o),C=e}return C}())(a,{type:"line",data:{datasets:n},options:{scales:r,plugins:{annotation:{annotations:s}}}}),a}const q=[2e3,2300,2600,2750,3e3];class A extends HTMLDialogElement{static#y;static define(e){this.#y=e,customElements.define("hss-dialog-game-details",this,{extends:"dialog"})}static get observedAttributes(){return["game"]}attributeChangedCallback(e,t,a){if(t!==a)return"game"===e?this.game=a:void 0}#v=null;get game(){return this.#v}set game(e){const t=this.#v!=e;this.#v=e,t&&(this.setAttribute("game",e),this.update())}connectedCallback(){A.#y.onChange(["game","teamMember","playerName","playerMMR"],(()=>this.update()))}async update(){if(null==this.game)return void this.close();this.querySelector("table#gamePlayers").game=this.game,this.querySelector("ol#gameEvents").game=this.game;const e=await A.#y.games().get(this.game),t=[];for await(const e of A.#y.teamMembers().index("game").where(this.game)){const a=[];for await(const t of A.#y.playerMMRs().index("profile").where(e.profile))a.push({x:t.date,y:Number.parseInt(t.mmr)});a.sort(((e,t)=>t.x-e.x)),t.push({name:await A.#y.currentPlayerName(e.profile),data:a})}const a=new Date(e.date);this.querySelector("em").textContent=a.toLocaleString();const n=this.querySelector("div[mmr-chart]"),r=await P(t,e.date);n.replaceChildren(r)}showModal(){this.open||super.showModal()}}class I extends HTMLDialogElement{static#y;static define(e){this.#y=e,customElements.define("hss-dialog-player-details",this,{extends:"dialog"})}static get observedAttributes(){return["profile"]}attributeChangedCallback(e,t,a){if(t!==a)return"profile"===e?this.profile=a:void 0}#x=null;get profile(){return this.#x}set profile(e){const t=this.#x!=e;this.#x=e,t&&(this.setAttribute("profile",e),this.update())}connectedCallback(){I.#y.onChange(["playerName","playerMMR","event"],(()=>this.update()))}async update(){if(null==this.profile)return void this.close();const e=await I.#y.currentPlayerName(this.profile),t=await I.#y.playerMMRs().index("profile").getAll(this.profile),a=this.querySelector("div#chartArea"),n=this.querySelector("a[name]");n.textContent=e,n.href=`https://www.steamidfinder.com/lookup/${e}/`,n.target="_blank",this.querySelector("span[profile]").textContent=this.profile,t.sort(((e,t)=>e.date-t.date));const r=[{name:e,data:[...t.map((e=>({x:e.date,y:Number.parseInt(e.mmr)})))]}],i=await P(r);a.replaceChildren(i);const s=await I.#y.playerMMRStatistics(this.profile);this.querySelector("span[mmrAverage]").textContent=Math.floor(s.mean).toString(),this.querySelector("span[mmrStd]").textContent=Math.floor(s.std).toString();const o=await I.#y.playerRivalry(this.profile);this.querySelector("span[kills]").textContent=o.kills.toString(),this.querySelector("span[deaths]").textContent=o.deaths.toString(),this.querySelector("span[assists]").textContent=o.assists.toString(),this.querySelector("span[collateral]").textContent=o.collateral.toString()}showModal(){this.open||super.showModal()}}!async function(){const e=new m,t=new b;x.define(),y.define(),w.define(e),v.define(e),k.define(e),M.define(e),A.define(e),I.define(e),(async()=>{for await(const a of t){const t=a.detail,n=await t.text(),r=(new DOMParser).parseFromString(n,"application/xml"),i=await h(r);await e.import(i)}})();const a=document.getElementById("fileButton");(async()=>{for await(const e of new g(a,"click")){await t.getFile({types:[{description:"Hunt Showdown Attributes",accept:{"text/xml":[".xml"]}}],excludeAcceptAllOption:!0,multiple:!1}),a.toggleAttribute("hidden",!0);break}})(),document.getElementById("importButton").addEventListener("click",(async()=>{const t=document.querySelector("footer input#import");t.click(),await async function(e,t=100){if(e())return;let a;await new Promise((n=>{a=setInterval((()=>{e()&&n()}),t)})),clearInterval(a)}((()=>null!=t.files[0]));const a=await t.files[0].text(),n=JSON.parse(a);await e.import(n)})),document.getElementById("exportButton").addEventListener("click",(async()=>{const t=await e.export(),a=JSON.stringify(t,null,2);!function(e){const t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.setAttribute("download",e.name),a.addEventListener("click",(()=>setTimeout((()=>{a.remove()})))),a.click()}(new File([a],"export.json",{type:"application/json"}))})),document.getElementById("games").addEventListener("gameChosen",(e=>{const t=e.detail,a=document.querySelector("dialog#gameDetails");a.game=t.id,a.showModal()})),document.getElementById("players").addEventListener("profileChosen",(e=>{const t=e.detail,a=document.querySelector("dialog#playerDetails");a.profile=t.id,a.showModal()})),document.getElementById("gamePlayers").addEventListener("profileChosen",(e=>{const t=e.detail,a=document.querySelector("dialog#playerDetails");a.profile=t.id,a.showModal()})),await e.open()}(),s=i.O(s)})();